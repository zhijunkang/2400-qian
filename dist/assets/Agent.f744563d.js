import{G as e,C as l,o as a,b as o,e as d,f as t,w as r,E as s,r as n,F as u,k as i,c as p,g as m}from"./vendor.5d3966ca.js";import{f as c,a as g,g as h}from"./index.97836ba2.js";import{s as b}from"./request.48509952.js";import{_ as y}from"./index.32ff0ca4.js";const f={name:"agent",setup(){const a=e({Value2:"",Value1:"1",pageNum:1,pageSize:10}),o=e({rolename:"",activity:"",accountName:"",accountPwd:"",otAreaid:"",otAreaname:"",otAtid:"",ipok:"",role_id:"",user_id:"",userName:"",userPwd:"",safety:"",password:"",money:"",type:"",xianyu:"",draw:"",unknown:"",statues:"",goodsid:"",sum:1});e({rolename:"",activity:"",ipok:"",role_id:"",user_id:"",accountName:"",accountPwd:"",otAreaid:"",otAreaname:"",otAtid:"",userName:"",userPwd:"",safety:"",password:"",money:"",type:"",xianyu:"",draw:"",unknown:"",statues:"",goodsid:"",sum:1});const d=e({password:[{required:!0,message:"解锁密码不能为空",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择充值类型"}],money:[{required:!0,message:"请输入充值金额",trigger:"blur"},{type:"number",message:"充值金额必须为数字"}],xianyu:[{required:!0,message:"请输入仙玉数量",trigger:"blur"},{type:"number",message:"仙玉数量必须为数字"}],goodsid:[{required:!0,message:"请选择物品",trigger:"blur"}],sum:[{required:!0,message:"请输入物品数量",trigger:"blur"},{type:"number",message:"物品数量必须为数字"}]}),t=l([]),r=l([]),n=l([]),u=l(0),i=l(0),p=l(!1),m=l(!1),y=l(""),f=()=>{c(a).then((e=>{t.value=e.data.list,u.value=e.data.total||0})).catch((function(e){console.log(e)}))};f(),g().then((e=>{for(const l in e.data)n.value.push({label:l,value:e.data[l]})})).catch((function(e){console.log(e)}));const w=l(!1);let v=e({name:"",address:""}),V=-1;return{query:a,tableData:t,pageTotal:u,editVisible:w,rules:d,form:v,formFileds:o,isShowSendGoodsDialog:p,handleSendGoods:()=>{let e=new FormData;e.append("Value1",o.rolename),e.append("Value2",o.goodsid),e.append("Value3",o.sum),b.post("/api/sendgoods",e).then((e=>{s.success("物品发送完成"),setTimeout((()=>{p.value=!1}),500)}))},goodsOptions:n,sendGoodsClose:()=>{p.value=!1,m.value=!1},handleSearch:()=>{a.pageNum=1,f()},handlePageChange:e=>{a.pageNum=e,f()},handleDelete:(e,l)=>{for(let a in o)o[a]="sum"===a?1:l[a];p.value=!0},changeGoods:m,handleUpd:(e,l)=>{y.value=l.rolename,h(l.role_id).then((e=>{r.value=e.data})),m.value=!0},handleEdit:(e,l)=>{V=e,Object.keys(v).forEach((e=>{v[e]=l[e]})),w.value=!0},saveEdit:()=>{w.value=!1,s.success(`修改第 ${V+1} 行成功`),Object.keys(v).forEach((e=>{t.value[V][e]=v[e]}))},activityStatusName:e=>0===e?'<span style="color:green">正常</span>':1===e?'<span style="color:red">封停</span>':void 0,gradeStatusName:e=>e<=102?'<span style="color:#66CD00">0转'+e+"级</span>":e<=210?'<span style="color:#FF6E00">1转'+(e-102+14)+"级</span>":e<=338?'<span style="color:#3EDFEC">2转'+(e-210+14)+"级</span>":e<=459?'<span style="color:#FF0000">3转'+(e-338+59)+"级</span>":'<span style="color:#9B30FF">飞升'+(e-459+139)+"级</span>",goodsTableData:r,goodPageTotal:i,updThis:e=>{let l=new FormData;l.append("rgid",e.rgid),l.append("value",e.value),e.qhv&&l.append("qhv",e.qhv),e.qht&&l.append("qht",e.qht),l.append("type",e.type),l.append("goodsname",e.goodsname),l.append("skin",e.skin),l.append("usetime",e.usetime),l.append("equipShow",y.value),b.post("/api/good/updGood",l).then((e=>{s.success("修改成功")})),m.value=!0},role_name:y}}},w={class:"container"},v={class:"handle-box"},V=m("搜索"),_=["innerHTML"],q=["innerHTML"],C={class:"pagination"},F=m("取消"),k=m("发送");var S=y(f,[["render",function(e,l,s,m,c,g){const h=n("el-option"),b=n("el-select"),y=n("el-input"),f=n("el-button"),S=n("el-table-column"),D=n("el-table"),T=n("el-pagination"),x=n("el-form-item"),U=n("el-input-number"),G=n("el-form"),N=n("el-dialog");return a(),o("div",null,[d("div",w,[d("div",v,[t(b,{modelValue:m.query.Value1,"onUpdate:modelValue":l[0]||(l[0]=e=>m.query.Value1=e),placeholder:"请选择",class:"handle-select mr10"},{default:r((()=>[t(h,{label:"代理账号",value:"3"}),t(h,{label:"代理ID",value:"1"}),t(h,{label:"代理名称",value:"2"})])),_:1},8,["modelValue"]),t(y,{modelValue:m.query.Value2,"onUpdate:modelValue":l[1]||(l[1]=e=>m.query.Value2=e),placeholder:"用户名",class:"handle-input mr10"},null,8,["modelValue"]),t(f,{type:"primary",icon:"el-icon-search",onClick:m.handleSearch},{default:r((()=>[V])),_:1},8,["onClick"])]),t(D,{data:m.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:r((()=>[t(S,{property:"role_id",width:"80",label:"ID"}),t(S,{property:"rolename",width:"120",label:"角色名"}),t(S,{property:"grade",width:"120",label:"等级"},{default:r((e=>[d("div",{innerHTML:m.gradeStatusName(e.row.grade)},null,8,_)])),_:1}),t(S,{property:"accountName",width:"120",label:"账号"}),t(S,{property:"accountPwd",width:"120",label:"密码"}),t(S,{property:"otAreaid",width:"120",label:"代理ID"}),t(S,{property:"otAreaname",width:"120",label:"代理名称"}),t(S,{property:"otAtid",width:"120",label:"代理注册码"}),t(S,{property:"uptime",label:"离线时间",width:"120",sortable:""}),t(S,{property:"activity",width:"120",label:"封停状态"},{default:r((e=>[d("div",{innerHTML:m.activityStatusName(e.row.activity)},null,8,q)])),_:1}),t(S,{property:"codecard",width:"120",label:"仙玉"}),t(S,{property:"money",width:"120",label:"累计充值"}),t(S,{label:"操作",align:"center"},{default:r((e=>[t(f,{circle:"",icon:"el-icon-s-promotion",type:"success",title:"物品发送",size:"small",onClick:l=>m.handleDelete(e.$index,e.row)},null,8,["onClick"]),t(f,{circle:"",icon:"el-icon-edit",type:"success",title:"修改物品",size:"small",onClick:l=>m.handleUpd(e.$index,e.row)},null,8,["onClick"])])),_:1})])),_:1},8,["data"]),d("div",C,[t(T,{background:"",layout:"total, prev, pager, next","current-page":m.query.pageNum,"page-size":m.query.pageSize,total:m.pageTotal,onCurrentChange:m.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),t(N,{title:"物品发送",visible:m.isShowSendGoodsDialog,width:"380px",onClose:m.sendGoodsClose,modelValue:m.isShowSendGoodsDialog},{default:r((()=>[t(G,{ref:"sendGoodsForm",model:m.formFileds,rules:m.rules,"label-width":"80px"},{default:r((()=>[t(x,{label:"角色名",prop:"rolename"},{default:r((()=>[t(y,{modelValue:m.formFileds.rolename,"onUpdate:modelValue":l[2]||(l[2]=e=>m.formFileds.rolename=e),disabled:!0},null,8,["modelValue"])])),_:1}),t(x,{label:"角色ID",prop:"role_id"},{default:r((()=>[t(y,{modelValue:m.formFileds.role_id,"onUpdate:modelValue":l[3]||(l[3]=e=>m.formFileds.role_id=e),disabled:!0},null,8,["modelValue"])])),_:1}),t(x,{label:"选择物品",prop:"goodsid"},{default:r((()=>[t(b,{modelValue:m.formFileds.goodsid,"onUpdate:modelValue":l[4]||(l[4]=e=>m.formFileds.goodsid=e),filterable:"",placeholder:"可输入搜索"},{default:r((()=>[(a(!0),o(u,null,i(m.goodsOptions,(e=>(a(),p(h,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),t(x,{label:"数量",prop:"sum"},{default:r((()=>[t(U,{modelValue:m.formFileds.sum,"onUpdate:modelValue":l[5]||(l[5]=e=>m.formFileds.sum=e),modelModifiers:{number:!0},min:1,max:999},null,8,["modelValue"])])),_:1}),t(x,null,{default:r((()=>[t(f,{onClick:l[6]||(l[6]=e=>{m.isShowSendGoodsDialog=!1}),class:"pull-right margin-l-10"},{default:r((()=>[F])),_:1}),t(f,{type:"primary",onClick:l[7]||(l[7]=e=>m.handleSendGoods()),class:"pull-right"},{default:r((()=>[k])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["visible","onClose","modelValue"]),t(N,{title:"物品修改",visible:m.changeGoods,width:"1300px",onClose:m.sendGoodsClose,modelValue:m.changeGoods},{default:r((()=>[t(D,{data:m.goodsTableData,border:"",class:"table",ref:"multipleTable1","header-cell-class-name":"table-header"},{default:r((()=>[t(S,{property:"gid",width:"80",label:"gid"}),t(S,{property:"goodsname",width:"80",label:"名称"}),t(S,{property:"value",width:"820",label:"物品值"},{default:r((e=>[t(y,{type:"textarea",rows:4,onBlur:l=>m.updThis(e.row),modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l},null,8,["onBlur","modelValue","onUpdate:modelValue"])])),_:1}),t(S,{property:"usetime",width:"120",label:"使用次数"},{default:r((e=>[t(y,{modelValue:e.row.usetime,"onUpdate:modelValue":l=>e.row.usetime=l,onBlur:l=>m.updThis(e.row)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])),_:1}),t(S,{property:"qhv",label:"qhv",width:"80",sortable:""},{default:r((e=>[t(y,{modelValue:e.row.qhv,"onUpdate:modelValue":l=>e.row.qhv=l,onBlur:l=>m.updThis(e.row)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])),_:1}),t(S,{property:"qht",width:"80",label:"qht"},{default:r((e=>[t(y,{modelValue:e.row.qht,"onUpdate:modelValue":l=>e.row.qht=l,onBlur:l=>m.updThis(e.row)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])),_:1})])),_:1},8,["data"])])),_:1},8,["visible","onClose","modelValue"])])}],["__scopeId","data-v-3029688a"]]);export{S as default};
