import{C as e,D as l,o as a,b as o,e as d,f as t,w as r,E as s,r as u,F as n,k as i,c as p,g as m}from"./vendor.02403aa8.js";import{s as g}from"./request.7463563a.js";import{_ as c}from"./index.93e8dab5.js";const h={name:"basetable",setup(){const a=e({Value2:"",Value1:"1",pageNum:1,pageSize:10}),o=e({rolename:"",activity:"",ipok:"",role_id:"",user_id:"",userName:"",userPwd:"",safety:"",password:"",money:"",type:"",xianyu:"",draw:"",unknown:"",statues:"",goodsid:"",sum:1});e({rolename:"",activity:"",ipok:"",role_id:"",user_id:"",userName:"",userPwd:"",safety:"",password:"",money:"",type:"",xianyu:"",draw:"",unknown:"",statues:"",goodsid:"",sum:1});const d=e({password:[{required:!0,message:"解锁密码不能为空",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择充值类型"}],money:[{required:!0,message:"请输入充值金额",trigger:"blur"},{type:"number",message:"充值金额必须为数字"}],xianyu:[{required:!0,message:"请输入仙玉数量",trigger:"blur"},{type:"number",message:"仙玉数量必须为数字"}],goodsid:[{required:!0,message:"请选择物品",trigger:"blur"}],sum:[{required:!0,message:"请输入物品数量",trigger:"blur"},{type:"number",message:"物品数量必须为数字"}]}),t=l([]),r=l([]),u=l([]),n=l(0),i=l(0),p=l(!1),m=l(!1),c=l(""),h=()=>{(e=>g({url:"/api/role",method:"post",params:e}))(a).then((e=>{t.value=e.data.list,n.value=e.data.total||0})).catch((function(e){console.log(e)}))};h(),(e=>g({url:"/api/goods",method:"get",params:e}))().then((e=>{for(const l in e.data)u.value.push({label:l,value:e.data[l]})})).catch((function(e){console.log(e)}));const b=l(!1);let y=e({name:"",address:""}),v=-1;return{query:a,tableData:t,pageTotal:n,editVisible:b,rules:d,form:y,formFileds:o,isShowSendGoodsDialog:p,handleSendGoods:()=>{let e=new FormData;e.append("Value1",o.rolename),e.append("Value2",o.goodsid),e.append("Value3",o.sum),g.post("/api/sendgoods",e).then((e=>{s.success("物品发送完成"),setTimeout((()=>{p.value=!1}),500)}))},goodsOptions:u,sendGoodsClose:()=>{p.value=!1,m.value=!1},handleSearch:()=>{a.pageNum=1,h()},handlePageChange:e=>{a.pageNum=e,h()},handleDelete:(e,l)=>{for(let a in o)o[a]="sum"===a?1:l[a];p.value=!0},changeGoods:m,handleUpd:(e,l)=>{var a;c.value=l.rolename,(a=l.role_id,g({url:"/api/good/getUserGood?roleId="+a,method:"get"})).then((e=>{r.value=e.data})),m.value=!0},handleEdit:(e,l)=>{v=e,Object.keys(y).forEach((e=>{y[e]=l[e]})),b.value=!0},saveEdit:()=>{b.value=!1,s.success(`修改第 ${v+1} 行成功`),Object.keys(y).forEach((e=>{t.value[v][e]=y[e]}))},activityStatusName:e=>0===e?'<span style="color:green">正常</span>':1===e?'<span style="color:red">封停</span>':void 0,gradeStatusName:e=>e<=102?'<span style="color:#66CD00">0转'+e+"级</span>":e<=210?'<span style="color:#FF6E00">1转'+(e-102+14)+"级</span>":e<=338?'<span style="color:#3EDFEC">2转'+(e-210+14)+"级</span>":e<=459?'<span style="color:#FF0000">3转'+(e-338+59)+"级</span>":'<span style="color:#9B30FF">飞升'+(e-459+139)+"级</span>",goodsTableData:r,goodPageTotal:i,updThis:e=>{let l=new FormData;l.append("rgid",e.rgid),l.append("value",e.value),e.qhv&&l.append("qhv",e.qhv),e.qht&&l.append("qht",e.qht),l.append("type",e.type),l.append("goodsname",e.goodsname),l.append("skin",e.skin),l.append("usetime",e.usetime),l.append("equipShow",c.value),g.post("/api/good/updGood",l).then((e=>{s.success("修改成功")})),m.value=!0},role_name:c}}},b={class:"container"},y={class:"handle-box"},v=m("搜索"),f=["innerHTML"],w=["innerHTML"],V=m("修改物品 "),_={class:"pagination"},q=m("取消"),C=m("发送");var F=c(h,[["render",function(e,l,s,m,g,c){const h=u("el-option"),F=u("el-select"),k=u("el-input"),S=u("el-button"),D=u("el-table-column"),T=u("el-table"),U=u("el-pagination"),x=u("el-form-item"),G=u("el-input-number"),N=u("el-form"),B=u("el-dialog");return a(),o("div",null,[d("div",b,[d("div",y,[t(F,{modelValue:m.query.Value1,"onUpdate:modelValue":l[0]||(l[0]=e=>m.query.Value1=e),placeholder:"请选择",class:"handle-select mr10"},{default:r((()=>[t(h,{label:"玩家账号",value:"3"}),t(h,{label:"玩家ID",value:"1"}),t(h,{label:"玩家名称",value:"2"})])),_:1},8,["modelValue"]),t(k,{modelValue:m.query.Value2,"onUpdate:modelValue":l[1]||(l[1]=e=>m.query.Value2=e),placeholder:"用户名",class:"handle-input mr10"},null,8,["modelValue"]),t(S,{type:"primary",icon:"el-icon-search",onClick:m.handleSearch},{default:r((()=>[v])),_:1},8,["onClick"])]),t(T,{data:m.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:r((()=>[t(D,{property:"role_id",width:"80",label:"ID"}),t(D,{property:"rolename",width:"120",label:"角色名"}),t(D,{property:"grade",width:"120",label:"等级"},{default:r((e=>[d("div",{innerHTML:m.gradeStatusName(e.row.grade)},null,8,f)])),_:1}),t(D,{property:"userName",width:"120",label:"账号"}),t(D,{property:"userPwd",width:"120",label:"密码"}),t(D,{property:"uptime",label:"离线时间",width:"120",sortable:""}),t(D,{property:"activity",width:"120",label:"封停状态"},{default:r((e=>[d("div",{innerHTML:m.activityStatusName(e.row.activity)},null,8,w)])),_:1}),t(D,{property:"codecard",width:"120",label:"仙玉"}),t(D,{property:"money",width:"120",label:"累计充值"}),t(D,{label:"操作",align:"center"},{default:r((e=>[t(S,{circle:"",icon:"el-icon-s-promotion",type:"success",title:"物品发送",size:"small",onClick:l=>m.handleDelete(e.$index,e.row)},null,8,["onClick"]),t(S,{title:"修改物品",size:"small",onClick:l=>m.handleUpd(e.$index,e.row)},{default:r((()=>[V])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),d("div",_,[t(U,{background:"",layout:"total, prev, pager, next","current-page":m.query.pageNum,"page-size":m.query.pageSize,total:m.pageTotal,onCurrentChange:m.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),t(B,{title:"物品发送",visible:m.isShowSendGoodsDialog,width:"380px",onClose:m.sendGoodsClose,modelValue:m.isShowSendGoodsDialog},{default:r((()=>[t(N,{ref:"sendGoodsForm",model:m.formFileds,rules:m.rules,"label-width":"80px"},{default:r((()=>[t(x,{label:"角色名",prop:"rolename"},{default:r((()=>[t(k,{modelValue:m.formFileds.rolename,"onUpdate:modelValue":l[2]||(l[2]=e=>m.formFileds.rolename=e),disabled:!0},null,8,["modelValue"])])),_:1}),t(x,{label:"角色ID",prop:"role_id"},{default:r((()=>[t(k,{modelValue:m.formFileds.role_id,"onUpdate:modelValue":l[3]||(l[3]=e=>m.formFileds.role_id=e),disabled:!0},null,8,["modelValue"])])),_:1}),t(x,{label:"选择物品",prop:"goodsid"},{default:r((()=>[t(F,{modelValue:m.formFileds.goodsid,"onUpdate:modelValue":l[4]||(l[4]=e=>m.formFileds.goodsid=e),filterable:"",placeholder:"可输入搜索"},{default:r((()=>[(a(!0),o(n,null,i(m.goodsOptions,(e=>(a(),p(h,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),t(x,{label:"数量",prop:"sum"},{default:r((()=>[t(G,{modelValue:m.formFileds.sum,"onUpdate:modelValue":l[5]||(l[5]=e=>m.formFileds.sum=e),modelModifiers:{number:!0},min:1,max:999},null,8,["modelValue"])])),_:1}),t(x,null,{default:r((()=>[t(S,{onClick:l[6]||(l[6]=e=>{m.isShowSendGoodsDialog=!1}),class:"pull-right margin-l-10"},{default:r((()=>[q])),_:1}),t(S,{type:"primary",onClick:l[7]||(l[7]=e=>m.handleSendGoods()),class:"pull-right"},{default:r((()=>[C])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["visible","onClose","modelValue"]),t(B,{title:"物品修改",visible:m.changeGoods,width:"1300px",onClose:m.sendGoodsClose,modelValue:m.changeGoods},{default:r((()=>[t(T,{data:m.goodsTableData,border:"",class:"table",ref:"multipleTable1","header-cell-class-name":"table-header"},{default:r((()=>[t(D,{property:"gid",width:"80",label:"gid"}),t(D,{property:"goodsname",width:"80",label:"名称"}),t(D,{property:"value",width:"820",label:"物品值"},{default:r((e=>[t(k,{type:"textarea",rows:4,onBlur:l=>m.updThis(e.row),modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l},null,8,["onBlur","modelValue","onUpdate:modelValue"])])),_:1}),t(D,{property:"usetime",width:"120",label:"使用次数"},{default:r((e=>[t(k,{modelValue:e.row.usetime,"onUpdate:modelValue":l=>e.row.usetime=l,onBlur:l=>m.updThis(e.row)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])),_:1}),t(D,{property:"qhv",label:"qhv",width:"80",sortable:""},{default:r((e=>[t(k,{modelValue:e.row.qhv,"onUpdate:modelValue":l=>e.row.qhv=l,onBlur:l=>m.updThis(e.row)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])),_:1}),t(D,{property:"qht",width:"80",label:"qht"},{default:r((e=>[t(k,{modelValue:e.row.qht,"onUpdate:modelValue":l=>e.row.qht=l,onBlur:l=>m.updThis(e.row)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])),_:1})])),_:1},8,["data"])])),_:1},8,["visible","onClose","modelValue"])])}],["__scopeId","data-v-28dfc8ca"]]);export{F as default};
